# Final Project Proposal

<aside>
üíÜüèª **ÊàêÂì°Ôºö**109704001Ë®±ÊÅíÁùø„ÄÅ109704038Â≠´‰∫éÊ∂µ„ÄÅ110350028ÁøÅËèØÈßø„ÄÅ110704008ÁæÖÁ∑ØÁøî

</aside>

# ÂΩ±ÁâáÂ±ïÁ§∫

[https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing](https://drive.google.com/file/d/1vSyCnu_Az3-GZU9DhUnR5SUKbIGK6qCg/view?usp=sharing)

## Application design

### ÂãïÊ©üËàá‰∏ªÊó®

Âú®ÁÇ∫ÂÆ∂‰∫∫Êü•Ë©¢Èï∑ÁÖßÁõ∏ÈóúÊúçÂãôÊôÇÊÑüÂà∞Ë≥áË®äÊ∑∑Ê∑ÜÔºåÈ†ÅÈù¢‰∏çÊ∏ÖÁ≠âÊÉÖÊ≥ÅÁôºÁîü„ÄÇÂõ†Ê≠§ÊàëÂÄëÂ∞èÁµÑÊÉ≥Ë¶ÅÁÇ∫Âπ¥Èï∑ËÄÖÂèäÂÖ∂ÂÆ∂Â±¨Ë®≠Ë®àÊñπ‰æøÁöÑË≥áÊñôÂ∫´ÔºåÂæûÁµ±Êï¥ÂÖ¨ÈñãÁöÑË≥áÊñôËëóÊâãÔºåË®≠Ë®àË≥áÊñôÂ∫´Êû∂ÊßãÔºåÊúÄÂæåÂà∞Á∂≤È†ÅÂâçÂæåÁ´ØË®≠Ë®à„ÄÇ

### CRUD

- **Create:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÂâµÁ´ãËá™Â∑±Â∏≥Ëôü
- **Read:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÈÄ≤Ë°åÈóúÊñºÈï∑ÁÖßÊúçÂãôÁöÑÂú∞ÂçÄ„ÄÅÂäüËÉΩ„ÄÅË¶èÂâáÈÄ≤Ë°åÊü•Ë©¢
- **Update:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÊõ¥Êñ∞Ëá™Â∑±ÁöÑËíêËóèÊ©üÊßã
- **Delete:** ÂèØ‰æõ‰ΩøÁî®ËÄÖÂà™Èô§Ëá™Â∑±ÁöÑËíêËóèÊ©üÊßã

### ‰ªãÈù¢

ÁïåÈù¢ÂàÜÁÇ∫ÂÖ©Â§ßÈ°ûÔºö

- **ÊêúÂ∞ãÁïåÈù¢**
    - ÂäüËÉΩ„ÄÅÊúçÂãôÊêúÂ∞ã
    - Âú∞ÂüüÊêúÂ∞ã
    - Â∫ä‰ΩçÂ§öÂØ°ÊéíÂ∫è
    - Áõ∏ËøëË∑ùÈõ¢ÊéíÂ∫è
    

- **Âú∞ÂúñÈ†ÅÈù¢**
    - Êèê‰æõËá™ÂÆ∂Âú∞ÂùÄÊêúÂ∞ã
    - Âú®ÈªûÈÅ∏Âú∞Ê®ôÊôÇÊ®ôÁ§∫Áõ∏ÈóúË≥áË®ä
    - ÊñπÂúìÂäüËÉΩ
    - Áõ∏ÈóúË≥áË®äÂ¶ÇÊúçÂãô„ÄÅÁ∂≤ÂùÄ„ÄÅËÅØÁµ°Ë≥áË®ä
    

### ÂØ¶‰ΩúÂäüËÉΩ

- ‰ª•**Â∫ä‰ΩçÊï∏**ÈÄ≤Ë°åÂàÜÈ°ûÔºåÂ¶ÇÂ∫ä‰ΩçÊï∏Â§öÁÇ∫Á∂†Ááà„ÄÅÂ∫ä‰ΩçÊï∏‰∏≠ÁÇ∫ÈªÉÁáà„ÄÅÂ∫ä‰ΩçÊï∏‰ΩéÁÇ∫Á¥ÖÁáàÔºåÊéíÂ∫èÂëàÁèæ„ÄÇ
- ‰ª•**ÊúçÂãôÈ†ÖÁõÆ**ÈÄ≤Ë°åÂàÜÈ°ûÔºåÂíåÊêúÂ∞ã„ÄÇ
- ‰ª•**Á∏£Â∏Ç„ÄÅÈÑâÈéÆ**ÈÄ≤Ë°åÊêúÂ∞ã„ÄÇ
- Âà©Áî®**google geographyÂú∞ÂúñÂåñ**È†ÖÁõÆ‰æÜËÆì‰∫∫Áõ¥Êé•ËßÄÁúãÊ≠§Âú∞ÂùÄÊâÄÈúÄË≥áË®äÔºåÂ¶ÇËÅØÁµ°ÊñπÂºè„ÄÅÁ∂≤ÂùÄ„ÄÅÈõªË©±
- Ë®≠ÂÆöÂú∞ÂùÄÔºåÊèê‰æõ**ÊñπÂúìÂπæÂÖ¨ÈáåÂÖßÊúâÂì™‰∫õÊ©üÊßã**ÔºåÂ∫ä‰ΩçÊï∏ÁãÄÊÖãÁ≠âÁ≠â„ÄÇ
- Ë®≠ÂÆöÂú∞ÂùÄÊèê‰æõ**Ê©üÊßãÁöÑË∑ùÈõ¢**„ÄÇ
- Êèê‰æõ**ÊêúÂ∞ãÊ©üÊßãÂêçÂ≠óÔºå**Êèê‰æõÊ©üÊßãË≥áË®ä„ÄÇ
- ÈªûÈÅ∏Âú∞ÂùÄÂèØ‰ª•Áõ¥Êé•**ÈÄ£ÁµêÂà∞googleÂ∞éËà™**‰∏≠„ÄÇ
- ‰ª•ÂäüËÉΩÂàÜÈ°ûÊôÇÔºåÊèê‰æõÁõ∏ÈóúÁ∂≤Á´ô‰ªãÁ¥πË¶èÂÆöÔºåÂ¶ÇË°õÊúçÈÉ®„ÄÇ

## Data

> ***Áõ¥Êé•ÈªûÊìäÂêçÁ®±Âç≥ÂèØÂà∞Ë≥áÊñô‰æÜÊ∫êÁöÑÊâÄÂú®Á∂≤ÂùÄ***
> 

****[Èï∑ÁÖßABCÊìöÈªû](https://data.gov.tw/dataset/88270)Ôºö**

Ê©üÊßãÂêçÁ®±„ÄÅÊ©üÊßã‰ª£Á¢º„ÄÅÊ©üÊßãÁ®ÆÈ°û„ÄÅÁ∏£Â∏Ç„ÄÅÂçÄ„ÄÅÂú∞ÂùÄÂÖ®ÂùÄ„ÄÅÁ∂ìÂ∫¶„ÄÅÁ∑ØÂ∫¶„ÄÅO_ABC„ÄÅÁâπÁ¥ÑÊúçÂãôÈ†ÖÁõÆ„ÄÅÁâπÁ¥ÑÁ∏£Â∏Ç„ÄÅÁâπÁ¥ÑÂçÄÂüü„ÄÅÊ©üÊßãÈõªË©±„ÄÅÈõªÂ≠êÈÉµ‰ª∂„ÄÅÊ©üÊßãË≤†Ë≤¨‰∫∫ÂßìÂêç„ÄÅÁâπÁ¥ÑËµ∑Êó•„ÄÅÁâπÁ¥ÑËøÑÊó•„ÄÅÊúÄÂæåÁï∞ÂãïÊôÇÈñì

****[ÂÖ®ÂúãÊ©üÊßãÂêçÂÜä](https://www.sfaa.gov.tw/sfaa/pages/detail.aspx?nodeid=366&pid=2630)Ôºö**

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled.png)

**[Ë°õÊúçÈÉ®Èï∑ÁÖßÂ∞àÂçÄ](https://1966.gov.tw/LTC/mp-207.html)**Ôºö

Èï∑ÁÖßË¶èÂâá„ÄÅÁî≥Ë´ãË™™Êòé

### ERModel

> ***‰ΩøÁî®[QuickDBD](https://app.quickdatabasediagrams.com/#/d/SVcGqV)ÂØ¶ÁèæÁπ™Ë£ΩERMÔºå‰ΩÜÊ≠§ËªüÈ´îÁöÑrelationshipÂè™Êúâ(mandatory)1:M(optional)ÂèØÈÅ∏ÊìáÔºå‰∏ç‰∏ÄÂÆöÂíåÂØ¶ÈöõË®≠ÂÆöÊÉÖÊ≥ÅÁõ∏Âêå„ÄÇ***
> 
- **institution**ÔºöÂ∞áÊ≠§Ê©üÊßãÁöÑÂü∫Êú¨Ë≥áÊñô‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PK
    - ins_nameÔºö‰ª£Ë°®Ê©üÊßãÁöÑÂêçÁ®±
- **ins_info**ÔºöÂ∞áÊ©üÊßãÁöÑÁõ∏ÈóúË≥áË®ä‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK
    - managerÔºöË≤†Ë≤¨‰∫∫ÁöÑ‰∏≠ÊñáÂßìÂêç
    - phoneÔºöÊ©üÊßãÁöÑËÅØÁµ°ÈõªË©±
    - websiteÔºöÊ©üÊßãÁöÑÁõ∏ÈóúÁ∂≤ÂùÄ
- **ins_capacity**ÔºöÂ∞áÊ©üÊßãÁöÑÂ∫ä‰ΩçÊï∏‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK
    - car_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÂÆâÈ§äÂûãÂ∫ä‰ΩçÊï∏
    - nurs_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÈ§äË≠∑ÂûãÂ∫ä‰ΩçÊï∏
    - dem_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÂ§±Êô∫ÁÖßÈ°ßÂûãÂ∫ä‰ΩçÊï∏
    - lcar_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÈï∑ÊúüÁÖßË≠∑ÂûãÂ∫ä‰ΩçÊï∏
    - housing_numÔºö‰ª£Ë°®ÁõÆÂâç‰ΩøÁî®‰∏≠Â∫ä‰ΩçÊï∏
    - providing_numÔºö‰ª£Ë°®Êèê‰æõ‰πãÁ∏ΩÂ∫ä‰ΩçÊï∏
        - Ôºàderived attribute ‚áí ‰∏äËø∞cal, lcar‚Ä¶Êèê‰æõ‰πãÂ∫ä‰ΩçÁöÑÁ∏ΩÂíåÔºâ
- **type_func**Ôºö‰ª£Ë°®Ê©üÊßãÁöÑÈï∑ÁÖßÁ≠âÁ¥öÂíåÂäüËÉΩ‰ΩúÁÇ∫table
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK
    - typeÔºö‰ª£Ë°®Ê©üÊßãÈ°ûÂûã
        - ÔºàÂ¶ÇÔºöÈï∑ÁÖßABCÔºåÊàñÊòØÁßÅ‰∫∫Ê©üÊßãÁ≠âÁ≠âÔºâ
    - func_nameÔºö‰ª£Ë°®Êèê‰æõ‰πãÊúçÂãôÔºåÈÄ£Âêëfunc_webÁöÑfunc_name‰πãFK
        - ÔºàÂõ†ÈÄöÂ∏∏‰∏ÄÊ©üÊßãÂè™ÊúÉÈ°ØÁ§∫‰∏ªË¶ÅÊèê‰æõÊúçÂãôÔºå‰∏çÊúÉÊàñÊ≤íÊúâÂØ´ÂâØÈ†ÖÔºâ
- **func_web**Ôºö‰ª£Ë°®ËóâÁî±ÊúçÂãôÂêçÁ®±ÊâÄÈÄ£ÁµêÂà∞ÁöÑË¶èÂâáÁ∂≤ÂùÄ‰ΩúÁÇ∫table
    - func_nameÔºö‰ª£Ë°®Êèê‰æõ‰πãÊúçÂãôÔºåÁÇ∫PK
    - **webÔºö‰ª£Ë°®Â∞çÊáâ‰πãÁ∂≤ÂùÄ**
- memberÔºö‰ª£Ë°®Ëàá‰ΩøÁî®ËÄÖÁöÑÁõ∏ÈóúË≥áÊñô
    - member_idÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖ‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PK
    - member_nameÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖÊö±Á®±
    - member_emailÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖÁöÑemail
        - ÂêåÊôÇ‰ΩúÁÇ∫Â∏≥Ëôü
    - member_passwordÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖÁöÑÂØÜÁ¢º
- member**_favorite**Ôºö‰ª£Ë°®‰ΩøÁî®ËÄÖÁöÑËíêËóèÊ©üÊßã
    - member_idÔºö‰ª£Ë°®‰ΩøÁî®ËÄÖ‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºåÂêåÊôÇ‰πüÊòØÈÄ£Âêëuser.user_idÁöÑFK
    - ins_numÔºö‰ª£Ë°®Ê©üÊßã‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PKÔºå‰ª•ÂèäÈÄ£ÂêëinstitutionÁöÑFK

| ABCÂàÜÁ¥ö | ÊúçÂãôÈ†ÖÁõÆ (15) | ÂÖßÂÆπ | Ë¶èÂÆö„ÄÅÂÇôË®ª |
| --- | --- | --- | --- |
| A
(1) | ÂÄãÊ°àÁÆ°ÁêÜÊúçÂãô | Â±ÖÂÆ∂ÊúçÂãô+Êó•ÈñìÁÖßÈ°ß | Êì¨Ë®ÇË®àÁï´„ÄÅËºîÂ∞éBCÂñÆ‰Ωç |
| B
(13) | Â∞èË¶èÊ®°Â§öÊ©üËÉΩÊúçÂãô
Êó•ÈñìÁÖßÈ°ßÊúçÂãô
‰∫§ÈÄöÊé•ÈÄÅÊúçÂãô
Âà∞ÂÆÖÊ≤êÊµ¥ËªäÊúçÂãô
Â±ÖÂÆ∂Â§±ËÉΩÂÄãÊ°àÂÆ∂Â∫≠ÈÜ´Â∏´ÁÖßË≠∑ÊúçÂãô
Â±ÖÂÆ∂ÊúçÂãô
ÂÆ∂Â∫≠ÊâòÈ°ßÊúçÂãô
Â∞àÊ•≠ÁÖßË≠∑ÊúçÂãô
ÂñòÊÅØÊúçÂãô
ÂúòÈ´îÂÆ∂Â±ãÊúçÂãô
ËºîÂÖ∑ÂèäÂ±ÖÂÆ∂ÁÑ°ÈöúÁ§ôÁí∞Â¢ÉÊúçÂãô
ÁáüÈ§äÈ§êÈ£≤ÊúçÂãô | Â±ÖÂÆ∂ÁÖßÈ°ß„ÄÅÁ§æÂçÄÁÖßÈ°ß„ÄÅÊ©üÊßãÁÖßÈ°ß ÂÖ∂‰∏Ä | Â∞èË¶èÊ®°„ÄÅÂ§öÊ©üËÉΩÈï∑ÁÖßÊúçÂãô |
| C
(1) | Â∑∑ÂºÑÈï∑ÁÖßÁ´ô | ÂÖ±È§ê„ÄÅÂÅ•Â∫∑‰øÉÈÄ≤„ÄÅÂª∂Á∑©Â§±ËÉΩ | Á§æÂçÄÂèÉËàá(Èáå)„ÄÅËá®ÊôÇÁü≠ÊôÇÊï∏ÁÖßÈ°ß„ÄÅÂüπËÇ≤‰∏≠È´òÈΩ°ËàáÂ≠∏Áîü‰∫∫ÂäõË≥áÊ∫ê |
- **ins_address**Ôºö‰ª£Ë°®Ê©üÊßãÂíåÂú∞ÂùÄÁõ∏ÈóúÁöÑË≥áË®ä‰ΩúÁÇ∫table
    - add_idÔºö‰ª£Ë°®Ê©üÊßãÂú∞ÂùÄÁöÑ‰ª£ËôüÔºåÁî±Á≥ªÁµ±Áî¢Áîü‰∏çÈáçË§á‰∏îÈ°û‰ººindexÁöÑÂÄº‰ΩúÁÇ∫‰ª£ËôüÔºåÁÇ∫PK
        - ÔºàÁî±stringÊßãÊàêaddÁï∂‰ΩúPKÊàñFKÊúÉÈÄ†ÊàêÊïàÁéáÊµ™Ë≤ªÔºåÊâÄ‰ª•Â¢ûÂä†Ê≠§ÁâπÊÄßÁÇ∫PKÈÅîÂà∞Êñπ‰æøÈÅãÁÆóÔºâ
    - addÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÂú∞ÂùÄÂÖ®Âêç
    - cityÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÁ∏£ÊàñÂ∏Ç
    - distÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÂçÄÊàñÈÑâ
    - longitudeÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÁ∂ìÂ∫¶
    - latiitudeÔºö‰ª£Ë°®Ê©üÊßãÊâÄÂú®ÁöÑÁ∑ØÂ∫¶

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%201.png)

```sql
# Modify this code to update the DB schema diagram.
# To reset the sample schema, replace everything with
# two dots ('..' - without quotes).

institution
-
ins_num PK smallint 
ins_add_id FK >- ins_address.add_id smallint
ins_name UNIQUE varchar(50)

ins_capacity
-
ins_num PK smallint FK >- institution.ins_num 
caring_num smallint
nurse_num smallint
dem_num smallint
emp_num smallint #derived
long_caring_num smallint
housing_num smallint #derived
providing_num smallint

ins_info
-
ins_num PK smallint FK >- institution.ins_num
manager varchar(28)
phone varchar(50)
email varchar(100)
website varchar(500)

ins_address
-
add_id PK smallint
add varchar(100)
city char(6)
dist varchar(15)
longitude float
latitude float

type_func
-
int_num PK smallint FK >- institution.ins_num
type smallint
func_name varchar(60) FK >- func_web.func_name

func_web
-
func_name PK varchar(60)
func_website varchar(500)

user
-
user_id int PK
user_name unique varchar(50)
user_email varchar(100)
user_password varchar(50)

user_favorite
-
user_id int PK FK >- user.user_id
ins_num smallint PK FK >- institution.ins_num
```

## Work Plan

---

### Time Schedule

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%202.png)

![Untitled](Final%20Project%20Proposal%20c06cb86145f54294acefd2c3312d67a0/Untitled%203.png)

[Untitled Database](https://www.notion.so/268bf9f7e7654a0d9ee38f8cd911e67d?pvs=21)

### Discussion

[https://highfalutin-biplane-60c.notion.site/099d5c5a546546ff90322269b20ac268](https://www.notion.so/099d5c5a546546ff90322269b20ac268?pvs=21)

### Repository

https://github.com/Weng-john/DBcourse

```jsx
DROP DATABASE IF EXISTS Final_Project;

CREATE DATABASE Final_Project; 

USE Final_Project;

CREATE TABLE `institution` (
    `ins_num` smallint  NOT NULL ,
    `ins_name` varchar(100)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    ),
    CONSTRAINT `uc_institution_ins_name` UNIQUE (
        `ins_name`
    )
);

CREATE TABLE `ins_capacity` (
    `ins_num` smallint  NOT NULL ,
    `caring_num` smallint  NOT NULL ,
    `nurse_num` smallint  NOT NULL ,
    `dem_num` smallint  NOT NULL ,
    -- derived
    `long_caring_num` smallint  NOT NULL ,
    -- derived
    `housing_num` smallint  NOT NULL ,
    `providing_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_info` (
    `ins_num` smallint  NOT NULL ,
    `manager` varchar(28)  NOT NULL ,
    `phone` varchar(50)  NOT NULL ,
    `email` varchar(100)  NOT NULL ,
    `website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `ins_address` (
    `ins_num` smallint  NOT NULL ,
    `addr` varchar(100)  NOT NULL ,
    `city` char(6)  NOT NULL ,
    `dist` varchar(15)  NOT NULL ,
    `longitude` float  NOT NULL ,
    `latitude` float  NOT NULL ,
    PRIMARY KEY (
        `ins_num`
    )
);

CREATE TABLE `type_func` (
    `int_num` smallint  NOT NULL ,
    `pub_pri_type` smallint  NOT NULL ,
    `serve_type` smallint  NOT NULL ,
    `func_name` varchar(60)  NOT NULL ,
    PRIMARY KEY (
        `int_num`
    )
);

CREATE TABLE `func_web` (
    `func_name` varchar(60)  NOT NULL ,
    `func_website` varchar(500)  NOT NULL ,
    PRIMARY KEY (
        `func_name`
    )
);

CREATE TABLE `user` (
    `user_id` int  NOT NULL ,
    `user_name` varchar(50)  NOT NULL ,
    `user_email` varchar(100)  NOT NULL ,
    `user_password` varchar(50)  NOT NULL ,
    PRIMARY KEY (
        `user_id`
    ),
    CONSTRAINT `uc_user_user_name` UNIQUE (
        `user_name`
    )
);

CREATE TABLE `user_favorite` (
    `user_id` int  NOT NULL ,
    `ins_num` smallint  NOT NULL ,
    PRIMARY KEY (
        `user_id`,`ins_num`
    )
);

CREATE TABLE `temp` (
    `pub_pri_type` varchar(20),
    `ins_name` varchar(100),
    `website` varchar(500),
    `manager` varchar(28),
    `dist` varchar(15),
    `addr` varchar(100),
    `phone0` varchar(50),
    `phone1` varchar(50),
    `serve_type0` varchar(10),
    `serve_type1` varchar(10),
    `serve_type2` varchar(10),
    `serve_type3` varchar(10),
    `Init_Date` varchar(50),
    `caring_num` smallint,
    `nurse_num` smallint,
    `dem_num` smallint,
    -- derived
    `long_caring_num` smallint,
    -- derived
    `housing_num` smallint,
    `providing_num_111` smallint,

    CONSTRAINT `uc_temp_ins_name` UNIQUE (
        `ins_name`
    )
);

ALTER TABLE `ins_capacity` ADD CONSTRAINT `fk_ins_capacity_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_info` ADD CONSTRAINT `fk_ins_info_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `ins_address` ADD CONSTRAINT `fk_ins_address_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_int_num` FOREIGN KEY(`int_num`)
REFERENCES `institution` (`ins_num`);

ALTER TABLE `type_func` ADD CONSTRAINT `fk_type_func_func_name` FOREIGN KEY(`func_name`)
REFERENCES `func_web` (`func_name`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_user_id` FOREIGN KEY(`user_id`)
REFERENCES `user` (`user_id`);

ALTER TABLE `user_favorite` ADD CONSTRAINT `fk_user_favorite_ins_num` FOREIGN KEY(`ins_num`)
REFERENCES `institution` (`ins_num`);

LOAD DATA INFILE '/var/lib/mysql-files/final.csv' 
INTO TABLE temp
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';
```